{% extends "base.html" %}
{% block title %}רשימת מלאי{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h3 m-0">רשימת מלאי</h1>

  <div class="btn-group" role="group" aria-label="inventory-actions">
    <a class="btn btn-primary" href="{{ url_for('product_routes.list_products') }}">
      ניהול מוצרים
    </a>
    <a class="btn btn-outline-secondary" href="{{ url_for('category_routes.list_categories') }}">
      ניהול קטגוריות
    </a>
    <a class="btn btn-outline-secondary" href="{{ url_for('supplier_routes.list_suppliers') }}">
      ניהול ספקים
    </a>
    <a class="btn btn-outline-secondary" href="{{ url_for('product_color_routes.list_colors') }}">
      ניהול צבעים
    </a>
  </div>
</div>

<table id="inventoryTable" class="table table-striped table-hover table-bordered align-middle js-datatable table-st">
  <thead>
    <tr>
      <th>#</th>
      <th class="col-thumb">תמונה</th>
      <th>שם מוצר</th>
      <th>קטגוריה</th>
      <th>ספק</th>
      <th>צבע</th>
      <th>כמות</th>
      <th>עודכן</th>
    </tr>
  </thead>
  <tbody>
    {% for row in inventory %}
      <tr>
        <td>{{ row.product_id }}</td>

        <td class="col-thumb">
          {% if row.image_url %}
            <img class="prod-thumb" src="{{ row.image_url }}" alt="תמונה - {{ row.product_name }}" loading="lazy">
          {% else %}
            <div class="prod-thumb-fallback">אין תמונה</div>
          {% endif %}
        </td>

        <td>{{ row.product_name }}</td>
        <td>{{ row.category_name }}</td>
        <td>{{ row.supplier_name }}</td>

        <td>
          <span class="color-dot" style="background-color: {{ row.color_hex or '#ccc' }};"></span>
          {{ row.color_name or '—' }}
        </td>

        <td>{{ row.quantity }}</td>
        <td>{{ row.last_updated or '—' }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
