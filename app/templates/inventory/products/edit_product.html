{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>עריכת מוצר: {{ product.name }}</h2>

    <form method="POST" action="{{ url_for('product_routes.edit_product', id=product.id) }}">
        <div class="mb-3">
            <label for="name" class="form-label">שם המוצר</label>
            <input type="text" class="form-control" id="name" name="name" value="{{ product.name }}" required>
        </div>

        <div class="mb-3">
            <label for="supplier_id" class="form-label">ספק</label>
            <select class="form-select" id="supplier_id" name="supplier_id" required>
                {% for supplier in suppliers %}
                    <option value="{{ supplier.id }}" {% if supplier.id == product.supplier_id %}selected{% endif %}>
                        {{ supplier.company_name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="category_id" class="form-label">קטגוריה</label>
            <select class="form-select" id="category_id" name="category_id" required>
                {% for category in categories %}
                    <option value="{{ category.id }}" {% if category.id == product.category_id %}selected{% endif %}>
                        {{ category.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="color_id" class="form-label">צבע</label>
            <select class="form-select" id="color_id" name="color_id">
                <option value="">ללא</option>
                {% for color in colors %}
                    <option value="{{ color.id }}" {% if color.id == product.color_id %}selected{% endif %}>
                        {{ color.color_name }}
                    </option>
                {% endfor %}
            </select>

            <div class="mt-2">
                {% for color in colors %}
                    <div style="display: inline-block; margin: 4px; text-align: center;">
                        <span style="display:inline-block; width:18px; height:18px; border-radius:50%; border:1px solid #aaa; background-color: {{ color.hex_code }};" title="{{ color.color_name }}"></span><br>
                        <small>{{ color.color_name }}</small>
                    </div>
                {% endfor %}
            </div>
        </div>

        <div class="mb-3">
            <label for="quantity_per_unit" class="form-label">כמות ליחידה</label>
            <input type="text" class="form-control" id="quantity_per_unit" name="quantity_per_unit" value="{{ product.quantity_per_unit }}">
        </div>

        <div class="mb-3">
            <label for="unit_price" class="form-label">מחיר ליחידה</label>
            <input type="number" class="form-control" step="0.01" id="unit_price" name="unit_price" value="{{ product.unit_price }}" required>
        </div>

        <div class="mb-3">
            <label for="units_in_stock" class="form-label">מלאי זמין</label>
            <input type="number" class="form-control" id="units_in_stock" name="units_in_stock" value="{{ product.units_in_stock }}">
        </div>

        <div class="mb-3">
            <label for="description" class="form-label">תיאור</label>
            <textarea class="form-control" id="description" name="description" rows="3">{{ product.description }}</textarea>
        </div>

        <div class="mb-3">
            <label for="image_url" class="form-label">קישור לתמונה</label>
            <input type="url" class="form-control" id="image_url" name="image_url" value="{{ product.image_url }}">
        </div>

        <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="discontinued" name="discontinued" value="1"
                {% if product.discontinued %}checked{% endif %}>
            <label class="form-check-label" for="discontinued">
                הופסק
            </label>
        </div>

        <button type="submit" class="btn btn-primary">📀 עדכן מוצר</button>
        <a href="{{ url_for('product_routes.list_products') }}" class="btn btn-secondary">💙 חזור לרשימה</a>
    </form>
</div>
{% endblock %}
